<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PBK Tugas 6</title>
</head>
<body>
    <script>
        // Callback
        function ambilDataUser(userId, callback) {
            setTimeout(() => {
                const user = {
                    id: userId,
                    nama: "John Doe",
                    email: "john@example.com"
                };
                callback(user);
            }, 2000);
        }

        console.log("--- Callback Method ---");
        console.log("Memulai pengambilan data...");
        ambilDataUser(123, (user) => {
            console.log("Data user diterima:", user);
        });
        console.log("Proses lanjut...");

        // Promise
        function ambilDataProduk() {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const produk = [
                        { id: 1, nama: "Laptop", harga: 10000000 },
                        { id: 2, nama: "Smartphone", harga: 5000000 }
                    ];
                    resolve(produk);
                }, 3000);
            });
        }

        console.log("\n--- Promise Method ---");
        console.log("Memulai pengambilan produk...");
        ambilDataProduk()
            .then((produk) => {
                console.log("Daftar Produk:", produk);
            })
            .catch((error) => {
                console.error("Terjadi kesalahan:", error);
            });
        console.log("Proses lanjut...");

        // Async/Await 
        async function prosesTransaksi() {
            try {
                await new Promise((resolve) => {
                    setTimeout(() => {
                        resolve();
                    }, 4000);
                });
                
                const statusTransaksi = {
                    id: "TRX001",
                    status: "Berhasil",
                    waktu: new Date().toLocaleString()
                };
                
                console.log("\n--- Async/Await Method ---");
                console.log("Transaksi selesai:", statusTransaksi);
                return statusTransaksi;
            } catch (error) {
                console.error("Gagal memproses transaksi:", error);
            }
        }

        async function utama() {
            console.log("Memulai transaksi...");
            const hasil = await prosesTransaksi();
            console.log("Detail Transaksi:", hasil);
        }

        utama();
        console.log("Proses lanjut...");
    </script>
    
</body>
</html>